{% extends 'finance/base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
  <h2 class="mb-4">Welcome, {{ request.user.username }}</h2>

  <div class="row text-center mb-4">
    <div class="col-md-4">
      <div class="card bg-success text-white">
        <div class="card-body">
          <h5>Total Income</h5>
          <p>£{{ income }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card bg-danger text-white">
        <div class="card-body">
          <h5>Total Expenses</h5>
          <p>£{{ expense }}</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="card bg-primary text-white">
        <div class="card-body">
          <h5>Balance</h5>
          <p>£{{ balance }}</p>
        </div>
      </div>
    </div>
  </div>

  <h4>Transactions</h4>
  <table class="table table-striped">
    <thead>
      <tr>
        <th>Date</th>
        <th>Type</th>
        <th>Category</th>
        <th>Description</th>
        <th>Amount</th>
      </tr>
    </thead>
    <tbody>
      {% for t in transactions %}
        <tr>
          <td>{{ t.date }}</td>
          <td>{{ t.type }}</td>
          <td>{{ t.category.name }}</td>
          <td>{{ t.description }}</td>
          <td>£{{ t.amount }}</td>
        </tr>
      {% empty %}
        <tr><td colspan="5">No transactions found.</td></tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
